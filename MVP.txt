MudMind MVP
План разработки (Alpha 0.1)Концепция продукта: MudMind — кооперативный клиент для текстовых MUD-игр, где игрок ("капитан") и ИИ ("первый офицер") работают в команде. ИИ обрабатывает рутину и реагирует на опасности, но контроль остаётся у игрока. Это не автономный бот, а помощник с рефлекторными реакциями.Цель MVP (Alpha 0.1): доказать концепцию "человек + ИИ" через мгновенные рефлекторные реакции на опасности и рутину. Фокус на reflex-пайплайне с приоритетами, правилами и очередью команд.Критерии успеха MVP:Запуск ≤ 10 секунд (включая загрузку модели <3 сек).
Реакция ИИ <200 мс на CPU.
Игрок видит приоритетные подсказки и может выбрать/игнорировать.
CRITICAL-ситуации обрабатываются с авто-выбором при таймауте.
Стабильный цикл: парсинг → диагностика → предложения → отправка.

Архитектура MVP1. 
Структура проекта (ключевые компоненты)src/mudmind/domain/: events.py, state.py, rules.py, priority_levels.py (доменные модели правил и приоритетов).
src/mudmind/core/: event_bus.py, mud_client.py, state_manager.py (единая точка обновления состояния).
src/mudmind/core/reflex/: pipeline.py, parser.py, classifier.py, rule_engine.py, command_sequencer.py, suggester.py, executor.py.
src/mudmind/gui/: Две панели + подсветка приоритета (красный для CRITICAL).
data/configs/: default_rules.json, user_rules.json (правила с condition, priority, action_sequence).

2. Технический стек
Python 3.12, Dear PyGui (GUI), llama-cpp-python (GGUF).
EventBus для слабой связанности.
SQLite для адаптации (player_patterns, learned_rules).
PyInstaller для EXE.

Ключевые компоненты
A. Микро-модель (рефлекторный слой) Размер ~500 МБ (GGUF Q4_K_M, контекст 1024 токена).
Задержка <200 мс.
Генерирует ровно 3 команды по промпту (temperature=0.3).
Пост-обработка: валидация, очистка.

B. Reflex-пайплайн (основной цикл тика)
MudClient → EventBus (MudLineReceived).
Parser → извлечение (HP, статусы, exits, items, mobs).
StateManager → обновление состояния + StateUpdatedEvent.
Classifier → флаги (in_combat, low_health, prone и т.д.).
RuleEngine → применение user_rules.json (CRITICAL → прерывание).
PromptBuilder → сбор контекста + топ-правил.
MicroModel → генерация 3 команд.
CommandSequencer → очередь, таймауты (2-4 тика), прерывание CRITICAL ("\n").
GUI/Executor → отображение + отправка (авто при CRITICAL-таймауте 5 сек).

C. GUI (одно окно, две панели + sidebar)
Левая: вывод MUD с хайлайтом (жирный items, красный risks).
Правая: режим "СОВЕТНИК", приоритет (цвет), 3 радио-кнопки, поле своей команды.
Sidebar: статус (HP, позиция), активные правила, прогноз (в бою).

D. Приоритеты и правила
Уровни: CRITICAL (авто при таймауте), HIGH, MEDIUM, LOW.
Правила: JSON → объекты Rule (id, condition, priority, action_sequence).
Адаптация: KnowledgeBase.learn() на успехах/неудачах.

E. Подключение и безопасность
TCP/Telnet, авто-подключение.
Белый список команд, валидация.
Флаги: transit_mode, auto_routine, auto_combat и т.д.

Поток работы пользователя
Запуск → подключение к MUD.
Игра: вывод в левой панели, предложения в правой.
Выбор: клик/ввод → отправка.
CRITICAL (HP<10%, prone в бою): красная подсветка, авто-команда1 через 5 сек.
Адаптация: система запоминает успешные выборы игрока.

Режимы (базовые в MVP):Советник (основной): предложения + подтверждение.
Авто для CRITICAL (по правилам).

Ограничения MVP
В MVP: Рефлекторный пайплайн с rule_engine и command_sequencer.
 Приоритеты с прерыванием и авто-выбором.
 StateManager и доменные правила.
 Адаптация на паттернах.
 Базовый парсинг и прогноз в бою.  НЕ в MVP: Большие модели и router.
 Автомап и сложная база знаний.
 Полные сценарии (транзит/эксплоринг с completion % — только базово).
 Обучение в рантайме (только логирование).

План разработки по неделям 
Неделя 1: Графический интерфейс
Основное окно с двумя панелями
Связка GUI  бэкенд (EventBus)
Система выбора/отправки команд
Настройки подключения к MUD

Неделя 2: Ядро и домен
EventBus, MudClient, StateManager.
Domain: events, state, rules.py, priority_levels.py.

Неделя 3: Reflex-пайплайн (часть 1)
Parser, Classifier, RuleEngine (с user_rules.json).

Неделя 4: Reflex-пайплайн (часть 2)
PromptBuilder, MicroModel интеграция, CommandSequencer.

Неделя 5: Полная интеграция и полировка
Полный цикл + тестирование на реальном MUD.
Адаптация (KnowledgeBase), конфиги, EXE (PyInstaller).
Тесты (особенно rule_engine и sequencer).

Метрики успеха
Реакция полного цикла <500 мс.
CRITICAL-ситуации обрабатываются корректно (прерывание, авто).
Память <1 ГБ, запуск <10 сек.
Пользователь: "ИИ спасает в бою и не мешает в рутине".

Риски и mitigation
Несовместимость парсинга → конфигурируемые regex.
Задержки модели → fallback на шаблоны.
Сложность правил → default_rules.json с примерами.

MudMind Alpha 0.1 — рефлекторный помощник, который мгновенно реагирует на опасности по правилам игрока, сохраняя кооперативный баланс.

